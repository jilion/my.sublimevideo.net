<% poster = if @video.get('poster').get('src') then " poster='#{@video.get('poster').get('src')}'" else '' %>
<% sizes = if @builderClass isnt 'iframe_embed' then " width='#{@video.get('width')}' height='#{@video.get('height')}' " else '' %>
<% style = if @builderClass is 'iframe_embed' then " style='display:none'" else '' %>
<% data_name = if @video.get('sources').mp4Base().get('dataName') then " data-name='#{@video.get('sources').mp4Base().get('dataName')}'" else '' %>
<% data_uid = if @video.get('sources').mp4Base().get('dataUID') then " data-uid='#{@video.get('sources').mp4Base().get('dataUID')}'" else '' %>
<% sortedSources = @video.get('sources').sortedSources(MSVVideoCodeGenerator.builder.get('startWithHd')) %>

<% if @builderClass is 'lightbox': %>
  <% mp4Mobile = @video.get('sources').mp4Mobile() %>

  <pre class='prettyprint'><code class='language-html'>&lt;a href='<%= mp4Mobile.get('src') %>' class='sublime<%= " zoomable" if @video.get('thumbnail').get('magnifyingGlass') %>'&gt;</code></pre>
  <% if @video.get('thumbnail').srcIsUrl(): %>
    <pre class='prettyprint'><code class='language-html'>  &lt;img src='<%= @video.get('thumbnail').get('src') %>' width='<%= @video.get('thumbnail').get('thumbWidth') %>' height='<%= @video.get('thumbnail').get('thumbHeight') %>' /&gt;</code></pre>

    <% if @video.get('thumbnail').get('magnifyingGlass'): %>
      <pre class='prettyprint'><code class='language-html'>  &lt;span class='zoom_icon'&gt;&lt;/span&gt;</code></pre>
    <% end %>

  <% else: %>
    <pre class='prettyprint'><code class='language-html'>  <%= @video.get('thumbnail').get('src') %></code></pre>
  <% end %>
  <pre class='prettyprint'><code class='language-html'>&lt;/a&gt;</code></pre>
<% end %>

<% extra_spaces = if @builderClass is 'iframe_embed' then "    " else "" %>
<pre class='prettyprint'><code class='language-html'><%= extra_spaces %>&lt;video class='<%= @video.get('classes') %>'<%= poster %><%= sizes %>preload='none'<%= data_name %><%= data_uid %><%= style %>&gt;</code></pre>

<% for source in sortedSources: %>
  <% if source.get('isUsed') and source.srcIsUrl(): %>
    <pre class='prettyprint'><code class='language-html'><%= extra_spaces %>  &lt;source src='<%= source.get('src') %>' <%= "data-quality='#{source.get('quality')}'" if source.needDataQualityAttribute() %>/&gt;</code></pre>
  <% end %>
<% end %>

<pre class='prettyprint'><code class='language-html'><%= extra_spaces %>&lt;/video&gt;</code></pre>