- if @videos.isShowable(@models)
  %table
    %col
    %col.alt
    %col
    %col.alt
    %tr
      %th.video Video
      %th.loads
        %a#video_loads{ class: "sort_button#{ if @videos.sortBy == 'vl' then ' active' else '' }", href: "#" } Loads
      %th.plays
        %a#video_views{ class: "sort_button#{ if @videos.sortBy == 'vv' then ' active' else '' }", href: "#" } Plays
      %th.period Selected period
    - i = 0
    - for video in @models
      - if video.isShowable()
        - i += 1
        %tr{ class: "#{if i % 2 == 0 then 'alt' else ''}" }
          %td.video
            .wrap
              .crop{ id: "#{video.cid}-crop", style: "width:96px; height:54px;" }
                %span.overlay
              - if $("##{video.cid}-cache").size() > 0
                %script{ type: "text/javascript" }
                  $("##{video.cid}-crop").prepend($("##{video.cid}-cache").clone());
              - else
                - if video.get('poster_url')?
                  %script{ type: "text/javascript" }
                    new SublimeVideo.Media.ImagePreloader("#{video.sslPosterUrl()}", SublimeVideo.cropPosterframe, { "imgId": "#{video.cid}" });
              .right
                %h4{ title: video.title() }!= video.title(22)
                - if video.isUidGetFromSource() || video.noTitle()
                  %span.tooltip.warning
                    %span.icon
                    %span.content
                      %span.arrow
                      %span.p
                        Your video
                        - if video.isUidGetFromSource() && video.noTitle()
                          uid & title aren't
                        - else if video.isUidGetFromSource()
                          uid isn't
                        - else
                          title isn't
                        = "defined properly, please set data-* attribute(s) in your video tag."
                        %a{ href: "http://docs.#{SublimeVideo.Misc.Utils.topDomainHost()}/optimize-for-stats", onclick: "window.open(this); return false" }= "More info..."
                .spacer
                %span.video_uid= "##{video.id}"
                - switch video.get('sources_origin')
                  - when 'youtube'
                    %a.provider.youtube{ href: "http://www.youtube.com/watch?v=#{video.get('sources_id')}", title: 'Watch on YouTube'}
                      %span YouTube
                  - when 'vimeo'
                    %a.provider.vimeo{ href: "http://vimeo.com/#{video.get('sources_id')}", title: 'Watch on Vimeo'}
                      %span Vimeo

              .spacer
          %td.loads= Highcharts.numberFormat(video.vlTotal(), 0)
          %td.plays= Highcharts.numberFormat(video.vvTotal(), 0)
          %td.period
            .sparkline{ id: "sparkline_#{video.cid}", style: "width:162px;height:44px" }
  - if @videos.limit == 5 && @videos.total > 5
    .expander
      %a.down#show_more{ href: "#", onclick: "return false" }
        More videos
        %small (up to 20)
        %span.arrow.down
  - if @videos.limit == 20 && @videos.total > 5
    .expander
      %a#show_less{ href: "#", onclick: "return false" }
        Show only 5 videos
        %span.arrow.up
- else
  .empty_box
    %p= "No played or loaded videos."
