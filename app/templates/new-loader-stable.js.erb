/*! SublimeVideo loader  | (c) 2013 Jilion SA | http://sublimevideo.net
*/(function(){ (function(){var e,n,t,r,o,u,a,i,c,l,d,s,f,m,v,h,p,E,y,g,b,N,S,L,w,O,T,B,C,j,k,q,M,x,A,P,R,V,_,D;return E=document,t="DOMContentLoaded",j="onreadystatechange",D=window,n=0,r=1,e=2,M=[],u=n,g=!1,T="sublime",q="sublime_",C=[],O=!1,document.createElement("video"),document.createElement("source"),c={host:'<%= host %>',version:'<%= app_component_version %>',token:'<%= token %>',components:<%= components_versions.to_json.gsub('"', "'") %>},f=function(e,n,t){return e===t.token?""+t.host+"/s2/"+e+"."+"js":""+t.host+"/c/"+e+"/"+n+"/"+e+"."+"js"+"?t="+t.token},m=function(e){var n,t,r,o;t=[],o=e.components;for(n in o)r=o[n],t.push(f(n,r,e));return t},x=function(){return l()||d("sublime")},i=function(){var e,n,t,r;for(O=!0,r=[],n=0,t=C.length;t>n;n++)e=C[n],r.push(e());return r},v=function(){var e;return e={},window.sublimevideo=e,e.ready=function(e){return O?e():C.push(e)},e.load=function(){return c.loadForced=!0,L()}},l=function(){return E.getElementsByTagName("video").length>0},d=function(e){var n,t,r,o,u;if(e){if(E.querySelector)return null!=E.querySelector("."+e);if(E.getElementsByClassName)return o=E.getElementsByClassName(e),o&&o.length>0;for(n=RegExp("\\b"+e+"\\b"),r=E.getElementsByTagName("*"),u=0;r.length>u;){if(t=r[u].className,n.test(t))return!0;u++}return!1}return!1},S=function(e){return"function"==typeof e},B=function(e){var n;for(n=0;e.length>n;)e[n](),n++;return e.length=0},w=function(e){var n,t,r,o;for(o=[],t=0,r=e.length;r>t;t++)n=e[t],o.push(a(n));return o},a=function(e){var n,t;return n=E.getElementsByTagName("head")[0]||E.body,t=E.createElement("script"),t.type="text/javascript",t.src=e,t.async=!0,n.appendChild(t)},A=function(e){var n,t;t=0;for(n in e)e.hasOwnProperty(n)&&(t+=1);return t},_=0,h=function(){var n,t,r;if(_++,_===A(c.components)+1){for(t=0,r=R.length;r>t;t++)n=R[t],D[q].define.apply(this,n);return sublime_.require(["application"],function(n){var t;return t=new n,t.load(c,function(){return u=e,B(M),i()})})}},P=function(){var e;return e?(e=!1,E.addEventListener?(E.removeEventListener(t,y,!1),D.removeEventListener("load",y,!1)):(E.detachEvent(j,y),D.detachEvent("onload",y))):void 0},y=function(e){return!g&&(e||(e=D.event),(E.addEventListener||"complete"===E.readyState||e&&"load"===e.type)&&(P(),g=!0,x()||N))?L():void 0},s=function(){var e,n;if(n=!0,E.addEventListener)return E.addEventListener(t,y,!1),D.addEventListener("load",y,!1);if(E.attachEvent){E.attachEvent(j,y),D.attachEvent("onload",y),e=!1;try{e=!(null!=D.frameElement)}catch(r){}if(E.docElement&&E.docElement.doScroll&&e)return p()}},p=function(){if(!g){try{E.docElement.doScroll("left")}catch(e){return setTimeout(p,1),void 0}return y()}},D.console||(b=function(){},D.console={log:b,warn:b,error:b,debug:b}),N=!1,R=[],L=function(){return u===n?(u=r,w(m(c))):void 0},o=D[T],o&&o.ready&&o.load?console.error("SublimeVideo loader has been installed more than once."):(o=D[T]={},o.ready=function(n){return u===e?n():S(n)&&M.push(n),void 0},o.load=function(){return g?L():N=!0,void 0},k=D[q]={},k.define=function(){return R.push(Array.prototype.slice.apply(arguments))},k.component=h,v(),"complete"===document.readyState?y():(s(),V=D.jQuery,V&&S(V.ready)?V(E).ready(y):void 0))})();;sublime_.component('loader');})()