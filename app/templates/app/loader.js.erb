(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M;C="sublime",J="sublime_",E=[],B=!1,document.createElement("video").canPlayType||(document.createElement("video"),document.createElement("source")),h={ic:'<%= host %>',version:'<%= app_component_version %>',ie:'<%= token %>',ig:<%= components_versions.to_json.gsub('"', "'") %>,a:"sa"},i=function(a){var b;return b=a.a,""+a.ic+"/c/"+b+"/"+a.version+"/"+b+".js?t="+a.ie},L=function(){return j()||k("sublime")},g=function(){var a,b,c,d;B=!0,d=[];for(b=0,c=E.length;b<c;b++)a=E[b],d.push(a());return d},n=function(){var a;return a={},window.sublimevideo=a,a.ready=function(a){return B?a():E.push(a)},a.load=function(){return h.b=!0,z()}},j=function(){return p.getElementsByTagName("video").length>0},k=function(a){var b,c,d,e,f;if(a){if(p.querySelector)return p.querySelector("."+a)!=null;if(p.getElementsByClassName)return e=p.getElementsByClassName(a),e&&e.length>0;b=new RegExp("\\b"+a+"\\b"),d=p.getElementsByTagName("*"),f=0;while(f<d.length){c=d[f].className;if(b.test(c))return!0;
f++}return!1}return!1},p=document,c="DOMContentLoaded",G="onreadystatechange",M=window,b=0,d=1,a=2,x=null,K=[],I=[],f=b,v=null,r=!1,H=[],u=!1,w=function(a){return typeof a=="function"},D=function(a){var b;b=0;while(b<a.length)a[b](),b++;return a.length=0},z=function(){if(!r)return u=!0;if(f===b)return x()},m=function(){return function(a){return y(function(a){var b,c,d;D(K),c=0,b=window[C],d=b.prepare;while(c<H.length)d.apply(b,H[c]),c++;g();if(a)return a()})}},y=function(c){console.log("load app"),f===a&&c();if(f!==b)return;return f=d,A(i(h),function(){return console.log("loaded"),window[J].init(h,function(){return f=a,c()})})},s=function(){return function(){return u||L()?x(function(){return D(I)}):D(K)}},A=function(a,b){var c,d;return a?(c=p.getElementsByTagName("head")[0]||p.body,d=p.createElement("script"),d.type="text/javascript",d.src=a,d.async=!0,d[G]=d.onload=function(){var a;a=d.readyState;if(!b.c&&(!a||/loaded|complete/.test(a)))return b.c=!0,b()},c.appendChild(d)):b()},F=function(
a){return r?a():(v=a,l())},q=function(){var a;a=0,p.attachEvent&&p.readyState==="complete"?(p.detachEvent(G,q),a=1):p.addEventListener&&(p.removeEventListener(c,q,!1),a=1);if(a&&!r){r=!0;if(v)return v()}},l=function(){var a;if(p.addEventListener)return p.addEventListener(c,q,!1),M.addEventListener("load",q,!1);if(p.attachEvent){p.attachEvent(G,q),M.attachEvent("onload",q),a=!1;try{a=M.frameElement==null}catch(b){}if(p.docElement&&p.docElement.doScroll&&a)return o()}},o=function(){if(!r){try{p.docElement.doScroll("left")}catch(a){setTimeout(o,1);return}return q()}},window.console||(t=function(){},window.console={log:t,warn:t,error:t}),e=window[C],e&&e.ready&&e.prepare?console.error("SublimeVideo loader has been injected more than once."):(e=window[C]={},e.ready=function(a){if(w(a))return K.push(a)},e.prepare=function(a,c){var e;e=w(a)?a:w(c)?c:null,f===d?H.push([a,c]):f===b&&(L()?(e&&I.push(e),r&&(H.push([a,c]),x(function(){return D(I)}))):e&&(r?e():K.push(e)));return},x=m(),n(),F(s()))}
).call(this)
