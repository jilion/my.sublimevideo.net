= content_for :head_before, sublimevideo_include_tag(request.ssl?, SiteToken.my)
= content_for :head, javascript_include_tag('video_code_generator')

= title_and_content_header "Video Code Generator"

:coffeescript
  $ ->
    SublimeVideoSizeChecker.setRoot('/video-size-checker/')
    window.MSVVideoCodeGenerator.builderRouter = new MSVVideoCodeGenerator.Routers.BuilderRouter(logged_in: #{user_signed_in?}, sites: #{@sites.try(:to_json) || []})

-# %p.desc.help= raw "WordPress user? Check-out our #{link_to "WordPress plugin", docs_page_url('wordpress', subdomain: 'docs'), onclick: "window.open(this); return false"} instead!"

.com_text
  = "The SublimeVideo code generator helps you build well-configured <video> elements easily, and also avoid common mistakes to ensure the optimal viewing experience for all your audience."

#video_embed_type_selector
  .radio_wrap
    = radio_button_tag "type", "standard", checked: true
    = label_tag "type_standard", "Standard"
  .radio_wrap
    = radio_button_tag "type", "lightbox"
    = label_tag "type_lightbox", "Lightbox"
  .radio_wrap
    = radio_button_tag "type", "iframe_embed"
    = label_tag "type_iframe_embed", "Iframe Embed"

.login_needed
  #demo_bootstrap
    %p.note
      You don't have you video assets yet, or just want to test-drive SublimeVideo?
    %button.green_button#use_demo_assets Use our demo assets!
    %a.reset.hl{ href: "", style: 'display:none' } Reset demo assets

  .spacer

  .big_break

  %form#video_code_form
    #lightbox_attributes.specialized_video_embed_type_box{ style: 'display:none' }

    #iframe_embed_attributes.specialized_video_embed_type_box{ style: 'display:none' }

    #poster
    .spacer

    #sources
    .spacer

    %p.note><
      != "You can find help to encode your videos in our&nbsp;"
      = link_to "documentation", login_url(page: 'encode-videos-for-the-web', subdomain: 'docs'), onclick: "window.open(this); return false"
      = "."
    .big_break

    #settings
    .spacer

    .big_break

  #preview
  .spacer

  #code
    %button.blue_button#get_the_code{ style: "margin:auto" } Get the Code

  #popup_code.popup{ style: "display:none" }
    .popup_wrap
      .lights
        .content#code_content
        = link_to "/", class: 'close', onclick: "MSVVideoCodeGenerator.codeView.popup.close(); return false" do
          %span Close
.spacer

#login_needed_for_iframe_embed{ style: "display:none" }= "Please #{link_to "Log In", login_url(subdomain: 'my', user_return_to: video_code_path)} or #{link_to "Sign Up", signup_url(subdomain: 'my')} to generate an iframe embed code.".html_safe