= title_and_content_header("Stats for #{@site.hostname || @site.token}")

:coffeescript
  $ ->
    # Enable pusher logging - don't include this in production
    # Pusher.log = (message) ->
    #   window.console.log(message) if (window.console && window.console.log)
    # Flash fallback logging - don't include this in production
    # WEB_SOCKET_DEBUG = true

    window.MSVStats.pusher = new Pusher('#{PusherConfig.key}', encrypted: true)
    window.MSVStats.sites = new MSVStats.Collections.Sites(#{current_user.sites.order(:hostname).to_json(only: [:token, :hostname], methods: [:plan_video_views, :plan_month_cycle_start_time, :plan_month_cycle_end_time])})
    window.MSVStats.sites.select('#{@site.token}')
    window.MSVStats.statsRouter = new MSVStats.Routers.StatsRouter()
    Backbone.history.start({ pushState: true })

#sites_select

#period_selectors
  %ul
    %li
      .days365
        %span#period_days365_vv_total.total
        #period_days365_sparkline.sparkline
        %span.title last 365 days
    %li
      .days30
        %span#period_days30_vv_total.total
        #period_days30_sparkline.sparkline
        %span.title last 30 days
    %li
      .hours
        %span#period_hours_vv_total.total
        #period_hours_sparkline.sparkline
        %span.title last 24 hours
    %li
      .minutes
        %span#period_minutes_vv_total.total
        #period_minutes_sparkline.sparkline
        %span.title last 60 minutes
    %li
      .seconds
        #period_seconds_content
          %span#period_seconds_vv_total.total
          #period_seconds_sparkline.sparkline
          %span.title last 60 seconds

.spacer

%h3#dates_range_title
#date_pickers

#vv
  #vv_content
    #vv_chart
    #vv_chart_legend

.spacer

#bp
  %h3 Browser + OS
  #bp_content

#md
  %h3 HTML5 vs Flash
  #md_content
    #md_legend
    #md_pie_chart

.spacer

#plan_usage

%p Days period are in UTC