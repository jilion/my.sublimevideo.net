%h2
  %select#component_select_name{ 'data-token' => @component.token }
    - @components.each do |component|
      %option{ value: component.token, selected: ('selected' if component == @component) }
        = "#{component.name} (#{component.token})"


%h3 Version Tags
%table
  %tr
    %th= "Tag"
    %th= "Version"
    %th= "Action"
  - @component.tagged_versions.each do |tag_name, version|
    %tr{ class: cycle('', 'alt') }
      %td= tag_name.capitalize
      %td
        - if version
          = version.version
          = " (#{link_to 'download zip', admin_player_component_version_path(@component, version, format: :zip)})".html_safe
        - else
          Please choose a version for this tag.
      %td
        = form_for [:admin, @component] do |f|
          = select_tag "component[version_tags[#{tag_name}]]", options_for_select(@component.versions.map(&:version))
          = f.submit "Change version", confirm: "Are you REALLY sure?"

%h3 Last Versions
- if @component.versions.present?
  %table
    %tr
      %th= "Version"
      %th= "Released at"
      %th= "Action"
    - @component.versions.limit(20).each do |version|
      %tr{ class: cycle('', 'alt') }
        %td
          = version.version
          = " (#{link_to 'download zip', admin_player_component_version_path(@component, version, format: :zip)})".html_safe
        %td= version.created_at
        %td
          - if !version.tagged?
            = button_to "delete version", admin_player_component_version_path(version.token, version), data: { confirm: 'Are you REALLY sure?' }, method: :delete
          - else
            tagged

- else
  %p No versions yet.
