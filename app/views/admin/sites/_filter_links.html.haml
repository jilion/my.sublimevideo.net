%ul.filters
  %li
    = link_to "#{content_tag(:strong, display_integer(Site.with_state(:active).size))} Active".html_safe, admin_sites_path(with_state: 'active'), remote: true, class: 'remote'
    %ul{ style: 'padding:5px 0 5px 18px;' }
      %li
        = link_to "#{content_tag(:strong, display_integer(Site.in_plan('free').size))} Free".html_safe, admin_sites_path(in_plan: 'free'), remote: true, class: 'remote'
      %li
        = link_to "#{content_tag(:strong, display_integer(Site.in_trial.size))} Trial".html_safe, admin_sites_path(in_trial: true), remote: true, class: 'remote'
      %li
        = link_to "#{content_tag(:strong, display_integer(Site.in_paid_plan.size))} Paying".html_safe, admin_sites_path(paid_plan: true), remote: true, class: 'remote'
        (
        = link_to "#{content_tag(:strong, display_integer(Site.in_plan('plus').size))} Plus".html_safe, admin_sites_path(in_plan: 'plus'), remote: true, class: 'remote'
        |
        = link_to "#{content_tag(:strong, display_integer(Site.in_plan('premium').size))} Premium".html_safe, admin_sites_path(in_plan: 'premium'), remote: true, class: 'remote'
        )
      %li
        = link_to "#{content_tag(:strong, display_integer(Site.in_plan('sponsored').size))} Sponsored".html_safe, admin_sites_path(in_plan: 'sponsored'), remote: true, class: 'remote'
  %li= link_to "#{content_tag(:strong, display_integer(Site.with_state(:suspended).size))} Suspended".html_safe, admin_sites_path(with_state: 'suspended'), remote: true, class: 'remote'
  %li= link_to "#{content_tag(:strong, display_integer(Site.with_state(:archived).size))} Archived".html_safe, admin_sites_path(with_state: 'archived'), remote: true, class: 'remote'

= "-----------------------------------------------"

%p.filters
  = link_to "#{content_tag(:strong, display_integer(Site.active.overusage_notified.size))} With Peak Insurance".html_safe, admin_sites_path(with_state: 'active', overusage_notified: true), remote: true, class: 'remote'
  |
  = link_to "#{content_tag(:strong, display_integer(Site.active.with_next_cycle_plan.size))} Will downgrade".html_safe, admin_sites_path(with_state: 'active', with_next_cycle_plan: true), remote: true, class: 'remote'
  |
  = link_to "#{content_tag(:strong, display_integer(Site.active.with_extra_hostnames.size))} With extra hostnames".html_safe, admin_sites_path(with_state: 'active', with_extra_hostnames: true), remote: true, class: 'remote'
  |
  = link_to "#{content_tag(:strong, display_integer(Site.active.with_wildcard.size))} With wildcard".html_safe, admin_sites_path(with_state: 'active', with_wildcard: true), remote: true, class: 'remote'
  |
  = link_to "#{content_tag(:strong, display_integer(Site.active.with_path.size))} With path".html_safe, admin_sites_path(with_state: 'active', with_path: true), remote: true, class: 'remote'
  |
  = link_to "#{content_tag(:strong, display_integer(Site.active.badged(false).size))} Without badge".html_safe, admin_sites_path(with_state: 'active', badged: false), remote: true, class: 'remote'

= "-----------------------------------------------"

%p.filters
  Tagged with:
  = display_tags_list(@tags)

= "-----------------------------------------------"

.range_form
  With at least
  %strong= label_tag 'with_min_billable_video_views', display_integer(params[:with_min_billable_video_views] || 0), style: 'display:inline'
  video plays in the last 30 days.
  = form_tag [:admin, :sites], method: :get, id: 'range_form' do
    = range_field_tag :with_min_billable_video_views, params[:with_min_billable_video_views].to_i, in: 0..500_000, step: 500, id: 'range_input', style: 'width:300px'
    = hidden_field_tag :with_state, 'active'
    = hidden_field_tag :by_last_30_days_billable_video_views, 'desc'
