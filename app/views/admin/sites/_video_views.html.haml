-# last_30_days_billable_video_views = Stat::Site.views_sum(token: site.token, from: 30.days.ago.utc, to: 1.day.ago.utc)
- total_video_views = Stat::Site.views_sum(token: site.token)
-# total_video_views = Stat::Site.collection.group(cond: { t: site.token }, initial: { sum: 0 }, reduce: 'function(doc, prev){ prev.sum += doc.vv ? ((isNaN(doc.vv.m) ? 0 : doc.vv.m) + (isNaN(doc.vv.e) ? doc.vv.e : 0)) : 0; }').first['sum'].to_i

%h3 Video views

%p
  Last 30 days traffic:&nbsp;&nbsp;&nbsp;
  = "#{number_with_delimiter(site.last_30_days_billable_video_views, :significant => false, :precision => 2, :delimiter => "'")} video views"
%p
  Last 30 days avg/day:
  = "#{number_with_delimiter(site.last_30_days_billable_video_views / 30, :significant => false, :precision => 2, :delimiter => "'")} video views"
%p
  All time traffic:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  = "#{number_with_delimiter(total_video_views, :significant => false, :precision => 2, :delimiter => "'")} video views"