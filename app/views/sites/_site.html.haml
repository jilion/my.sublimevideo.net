%tr{ :id => dom_id(site), :class => cycle("", "alt") }
  %td.site{ :class => site.hostname.present? ? "has_domain" : "empty"}
    .wrap
      - if site.hostname.present?
        -# TODO: Remove condition when no more site in beta state and remove if production on default icon for favicon
        = link_to(site.beta? ? [:transition, site] : [:edit, site], :class => "domain", :title => "Edit #{hostname_with_path(site)}") do
          %span.settings_icon
          = image_tag "https://getfavicon.appspot.com/http://#{hostname_with_path(site)}?defaulticon=http://#{hostname_with_path(site)}/favicon.ico", :onerror => "this.src='/images/embed/sites/default_favicon.png';", :alt => "Favicon", :size => "16x16", :id => "site_favicon_#{site.id}"
          = hostname_with_path_and_wildcard(site, :truncate => 30)
        - if site.need_path?
          .warning
            %span.icon= "warning"
            = info_box do
              %p= "You should probably add a path to restrict the vality of the player to your site, not the whole domain."
      - else
        = link_to [:edit, site], :class => "domain" do
          %span.settings_icon
          = "add a hostname"

      .plan
        - if site.plan
          = site.plan.name.humanize
        - elsif site.beta?
          = "Beta"
        - else
          = "No plan"

      - if site.addons.present?
        %ul.addons
          - site.addons.each do |addon|
            %li= addon.name.humanize

      .spacer

  %td.usage
    = render 'td_usage', site: site

  %td.code
    = link_to "Embed code", "", :class => "embed_code", :onclick => "return MySublimeVideo.showSiteEmbedCode('#{site.token}')"

  %td.status
    .wrap
      - if !site.cdn_up_to_date?
        %span.icon.in_progress
        = info_box do
          %p= "Your player is being deployed..."
      - else
        %span.icon.ok
        = info_box do
          %p= "Everything runs smoothly, it's ok!"
