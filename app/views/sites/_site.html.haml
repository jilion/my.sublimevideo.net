%tr{ id: dom_id(site), data: { "site-token" => site.token }, class: cycle("", "alt") }
  %td.site{ class: site.hostname.present? ? "has_domain" : "empty"}
    .wrap
      = render 'hostname', site: site
      .plan= render 'plan', site: site
      .cycle= render 'cycle', site: site
      .spacer

  %td.usage{ class: td_usage_class(site) }
    .wrap
      - if site.plan_id?
        = render 'td_usage', site: site
      - else
        = "—"

  %td.code
    .wrap
      - if site.plan_id?
        = link_to "Embed code", "", class: "embed_code", data: { token: site.token }
      - else
        = "—"
      %div{ id: "embed_code_popup_content_#{site.token}", style: 'display:none' }= render 'code', site: site

  %td.status
    .wrap
      - if site.invoices_failed?
        = tooltip_box href: site_invoices_path(site), class: "payment_issue" do
          %span.p= t 'site.status.payment_issue'
      - elsif site.invoices_open?
        = tooltip_box href: site_invoices_path(site), class: "payment_waiting" do
          %span.p= t 'site.status.payment_open'
      - elsif site.invoices_waiting?
        = tooltip_box href: site_invoices_path(site), class: "payment_waiting" do
          %span.p= t 'site.status.payment_waiting'
      - elsif site.cdn_up_to_date?
        = tooltip_box class: "ok" do
          %span.p= t 'site.status.ok'
      - else
        = tooltip_box class: "in_progress" do
          %span.p= t 'site.status.in_progress'
        .completed{ style: "display:none;" }
          = tooltip_box class: "ok" do
            %span.p= t 'site.status.ok'
